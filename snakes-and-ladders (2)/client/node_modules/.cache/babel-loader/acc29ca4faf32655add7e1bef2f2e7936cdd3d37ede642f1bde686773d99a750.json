{"ast":null,"code":"var _jsxFileName = \"/home/anirudh/Desktop/Programming/WebD/snakes-and-ladders/client/src/App.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from 'react';\nimport './App.css';\nimport io from 'socket.io-client';\nimport Grid from './components/grid';\nimport Dice from './components/dice';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst socket = io.connect('http://localhost:3001');\nfunction App() {\n  _s();\n  const [username, setUsername] = useState('');\n  const [room, setRoom] = useState('');\n  const [players, setPlayers] = useState([]);\n  const [winner, setWinner] = useState('');\n  const [showGame, setShowGame] = useState(false);\n  const [currentTurn, setCurrentTurn] = useState(0);\n\n  // Join room and setup game when player joins\n  const joinRoom = () => {\n    if (username !== '' && room !== '') {\n      console.log(username, room);\n      socket.emit('join_room', {\n        username,\n        room\n      });\n      setShowGame(true);\n    }\n  };\n\n  // Listen for updates to the players list\n  useEffect(() => {\n    socket.on('players_update', playersData => {\n      setPlayers(playersData);\n    });\n\n    // Listen for winner announcement\n    socket.on('game_winner', winner => {\n      setWinner(winner);\n    });\n\n    // Clean up listeners on unmount\n    return () => {\n      socket.off('players_update');\n      socket.off('game_winner');\n    };\n  }, []);\n\n  // Add new player to the game\n  const addPlayer = (name, position = 0, color) => {\n    const newPlayer = {\n      name,\n      position,\n      color\n    };\n    socket.emit('add_player', newPlayer);\n  };\n\n  // Update player position after dice roll\n  const updatePlayerPosition = (index, rolledNum) => {\n    setPlayers(prevPlayers => {\n      return prevPlayers.map((player, i) => {\n        if (i === index) {\n          let newPosition = player.position + rolledNum;\n\n          // Handle snakes and ladders here (adjust the newPosition accordingly)\n          const snakes = {\n            28: 10,\n            37: 3,\n            48: 16,\n            75: 32,\n            96: 42,\n            94: 71\n          };\n          const ladders = {\n            4: 56,\n            12: 50,\n            14: 55,\n            22: 58,\n            41: 79,\n            54: 88\n          };\n          if (snakes[newPosition]) {\n            newPosition = snakes[newPosition];\n          } else if (ladders[newPosition]) {\n            newPosition = ladders[newPosition];\n          }\n          if (newPosition > 100) {\n            newPosition -= rolledNum;\n          }\n          if (newPosition === 100) {\n            setWinner(player.name);\n            socket.emit('game_winner', player.name);\n          }\n          socket.emit('player_move', {\n            index,\n            newPosition\n          });\n          return {\n            ...player,\n            position: newPosition\n          };\n        } else {\n          return player;\n        }\n      });\n    });\n    setCurrentTurn(prevTurn => (prevTurn + 1) % players.length);\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"App\",\n    children: !showGame ? /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n        children: \"Join game\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 106,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"text\",\n        placeholder: \"Name\",\n        onChange: event => setUsername(event.target.value)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 107,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"text\",\n        placeholder: \"Room\",\n        onChange: event => setRoom(event.target.value)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 112,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: joinRoom,\n        children: \"Join\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 117,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 105,\n      columnNumber: 9\n    }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"game-container\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"grid-container\",\n        children: /*#__PURE__*/_jsxDEV(Grid, {\n          players: players\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 122,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 121,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"side-container\",\n        children: [/*#__PURE__*/_jsxDEV(Dice, {\n          players: players,\n          updatePlayerPosition: updatePlayerPosition,\n          currentTurn: currentTurn\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 125,\n          columnNumber: 13\n        }, this), winner && /*#__PURE__*/_jsxDEV(\"h2\", {\n          children: [winner, \" is the winner!\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 131,\n          columnNumber: 24\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 124,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 120,\n      columnNumber: 9\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 103,\n    columnNumber: 5\n  }, this);\n}\n_s(App, \"0WtSbElNJw8HkjtXHGFQFACwPpI=\");\n_c = App;\nexport default App;\nvar _c;\n$RefreshReg$(_c, \"App\");","map":{"version":3,"names":["React","useState","useEffect","io","Grid","Dice","jsxDEV","_jsxDEV","socket","connect","App","_s","username","setUsername","room","setRoom","players","setPlayers","winner","setWinner","showGame","setShowGame","currentTurn","setCurrentTurn","joinRoom","console","log","emit","on","playersData","off","addPlayer","name","position","color","newPlayer","updatePlayerPosition","index","rolledNum","prevPlayers","map","player","i","newPosition","snakes","ladders","prevTurn","length","className","children","fileName","_jsxFileName","lineNumber","columnNumber","type","placeholder","onChange","event","target","value","onClick","_c","$RefreshReg$"],"sources":["/home/anirudh/Desktop/Programming/WebD/snakes-and-ladders/client/src/App.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport './App.css';\nimport io from 'socket.io-client';\nimport Grid from './components/grid';\nimport Dice from './components/dice';\n\nconst socket = io.connect('http://localhost:3001');\n\nfunction App() {\n  const [username, setUsername] = useState('');\n  const [room, setRoom] = useState('');\n  const [players, setPlayers] = useState([]);\n  const [winner, setWinner] = useState('');\n  const [showGame, setShowGame] = useState(false);\n  const [currentTurn, setCurrentTurn] = useState(0);\n\n  // Join room and setup game when player joins\n  const joinRoom = () => {\n    if (username !== '' && room !== '') {\n      console.log(username, room);\n      socket.emit('join_room', { username, room });\n      setShowGame(true);\n    }\n  };\n\n  // Listen for updates to the players list\n  useEffect(() => {\n    socket.on('players_update', (playersData) => {\n      setPlayers(playersData);\n    });\n\n    // Listen for winner announcement\n    socket.on('game_winner', (winner) => {\n      setWinner(winner);\n    });\n\n    // Clean up listeners on unmount\n    return () => {\n      socket.off('players_update');\n      socket.off('game_winner');\n    };\n  }, []);\n\n  // Add new player to the game\n  const addPlayer = (name, position = 0, color) => {\n    const newPlayer = { name, position, color };\n    socket.emit('add_player', newPlayer);\n  };\n\n  // Update player position after dice roll\n  const updatePlayerPosition = (index, rolledNum) => {\n    setPlayers((prevPlayers) => {\n      return prevPlayers.map((player, i) => {\n        if (i === index) {\n          let newPosition = player.position + rolledNum;\n\n          // Handle snakes and ladders here (adjust the newPosition accordingly)\n          const snakes = {\n            28: 10,\n            37: 3,\n            48: 16,\n            75: 32,\n            96: 42,\n            94: 71\n          };\n          const ladders = {\n            4: 56,\n            12: 50,\n            14: 55,\n            22: 58,\n            41: 79,\n            54: 88\n          };\n\n          if (snakes[newPosition]) {\n            newPosition = snakes[newPosition];\n          } else if (ladders[newPosition]) {\n            newPosition = ladders[newPosition];\n          }\n\n          if (newPosition > 100) {\n            newPosition -= rolledNum;\n          }\n\n          if (newPosition === 100) {\n            setWinner(player.name);\n            socket.emit('game_winner', player.name);\n          }\n\n          socket.emit('player_move', { index, newPosition });\n\n          return { ...player, position: newPosition };\n        } else {\n          return player;\n        }\n      });\n    });\n\n    setCurrentTurn((prevTurn) => (prevTurn + 1) % players.length);\n  };\n\n  return (\n    <div className=\"App\">\n      {!showGame ? (\n        <div>\n          <h3>Join game</h3>\n          <input\n            type=\"text\"\n            placeholder=\"Name\"\n            onChange={(event) => setUsername(event.target.value)}\n          />\n          <input\n            type=\"text\"\n            placeholder=\"Room\"\n            onChange={(event) => setRoom(event.target.value)}\n          />\n          <button onClick={joinRoom}>Join</button>\n        </div>\n      ) : (\n        <div className=\"game-container\">\n          <div className=\"grid-container\">\n            <Grid players={players} />\n          </div>\n          <div className=\"side-container\">\n            <Dice\n              players={players}\n              updatePlayerPosition={updatePlayerPosition}\n              currentTurn={currentTurn}\n            />\n            {/* <PlayerCount addPlayer={addPlayer} /> */}\n            {winner && <h2>{winner} is the winner!</h2>}\n          </div>\n        </div>\n      )}\n    </div>\n  );\n}\n\nexport default App;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}